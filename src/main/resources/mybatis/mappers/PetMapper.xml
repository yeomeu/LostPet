<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="PetMapper">
	<select id="findPetTypes" resultType="PetType">
	SELECT
		pet_name as petName,
		pet_type as petType
	FROM
		pets
	</select>
	<insert id="insertLostPet" parameterType="lostPet">
	INSERT INTO lost_pet 
		(owner, pet_breed, lat, lng, lost_time, title, `desc`, reward)
	VALUES
		(#{owner.email} , #{petBreed},#{lat},#{lng},#{lostTime},#{title},#{desc},#{reward})	
	</insert>
	<select id="findLostList" resultType="lostPet">
		SELECT
			seq,
			owner as email,
			pet_breed as petBreed,
			lat,
			lng,
			lost_time as lostTime,
			title, 
			`desc`,
			reward 
		FROM
			lost_pet
	</select>
	<select id="findBreeds" parameterType="String" resultType="string">
		select pet_name from pets 
		where pet_name like '%${value}%';
	</select>
	<select id="findLostPets" parameterType="String" resultType="RemoteLostPet">
	select 
		seq ,
		desertion_no   AS  desertionNo ,
		care_addr      AS careAddr,
		lat            AS lat,
		lng            AS lng ,        
		care_nm        AS careNm,		
		care_tel       AS careTel,		
		charge_nm      AS chargeNm,	
		animal_img     AS animalImg,	
		happen_dt      AS happenDt,	
		happen_place   AS happenPlace,	
		kind_cd        AS kindCd,		
		sex_cd         AS sexCd,		
		notice_sdt     AS noticeSdt,	
		notice_edt     AS noticeEdt,	
		notice_no      AS noticeNo,	
		office_tel     AS officeTel
	from 
		rmt_lostinfo 
	where 
		happen_dt >= #{value}
	order by 
		happen_dt desc
	</select>
	<insert id="insertReomtePet" parameterType="RemoteLostPet">
		
		insert into rmt_lostinfo (
			desertion_no, 
			care_addr, 
			lat,
			lng,
			care_nm, 
			care_tel, 
			charge_nm, 
			animal_img, 
			happen_dt, 
			happen_place, 
			kind_cd, 
			sex_cd,
			notice_sdt, 
			notice_edt, 
			notice_no, 
			office_tel
		) values (
			#{desertionNo},
			#{careAddr},
			#{lat},
			#{lng},
			#{careNm},
			#{careTel},
			#{chargeNm},
			#{animalImg},
			#{happenDt},
			#{happenPlace},
			#{kindCd},
			#{sexCd},
			#{noticeSdt},
			#{noticeEdt},
			#{noticeNo},
			#{officeTel}
		);
	</insert>
</mapper>
